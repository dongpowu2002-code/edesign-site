<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eDesign Labs | å®¡è®¡è®°å½•ä»ª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .user-active { border-color: #38bdf8; background-color: #0c4a6e; color: white; transform: scale(1.05); }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen flex flex-col items-center py-12 px-4">

    <div class="max-w-md w-full space-y-8">
        
        <div class="bg-slate-800 p-4 rounded-2xl border border-slate-700 shadow-lg text-center">
            <h3 class="text-xs font-mono text-slate-500 uppercase tracking-widest mb-3">Step 1: éªŒè¯æ“ä½œäºº</h3>
            <div class="flex gap-4">
                <button id="btn-WDP" onclick="setUser('WDP')" class="flex-1 border-2 border-slate-700 py-3 rounded-xl transition-all duration-200 hover:border-sky-500 font-bold">WDP</button>
                <button id="btn-YAJ" onclick="setUser('YAJ')" class="flex-1 border-2 border-slate-700 py-3 rounded-xl transition-all duration-200 hover:border-sky-500 font-bold">YAJ</button>
            </div>
            <p id="user-hint" class="text-xs text-orange-400 mt-3 italic">è¯·å…ˆç‚¹å‡»ä¸Šæ–¹æŒ‰é’®é€‰æ‹©æ“ä½œå‘˜</p>
        </div>

        <div class="grid grid-cols-2 gap-6 opacity-50 pointer-events-none transition-opacity duration-300" id="control-panel">
            <div class="bg-slate-800 p-6 rounded-2xl text-center shadow-xl border border-slate-700">
                <div class="text-4xl mb-2">â­</div>
                <div id="star-count" class="text-5xl font-bold text-red-500 mb-4">0</div>
                <div class="flex gap-2">
                    <button onclick="change('star', -1)" class="flex-1 bg-slate-700 hover:bg-slate-600 py-2 rounded-lg active:scale-90">-</button>
                    <button onclick="change('star', 1)" class="flex-1 bg-red-600 hover:bg-red-500 py-2 rounded-lg active:scale-90 font-bold">+</button>
                </div>
            </div>

            <div class="bg-slate-800 p-6 rounded-2xl text-center shadow-xl border border-slate-700">
                <div class="text-4xl mb-2">ğŸ’£</div>
                <div id="bomb-count" class="text-5xl font-bold text-orange-500 mb-4">0</div>
                <div class="flex gap-2">
                    <button onclick="change('bomb', -1)" class="flex-1 bg-slate-700 hover:bg-slate-600 py-2 rounded-lg active:scale-90">-</button>
                    <button onclick="change('bomb', 1)" class="flex-1 bg-orange-600 hover:bg-orange-500 py-2 rounded-lg active:scale-90 font-bold">+</button>
                </div>
            </div>
        </div>

        <div class="bg-slate-800 rounded-2xl p-6 h-64 flex flex-col border border-slate-700">
            <h3 class="text-slate-500 text-[10px] font-mono uppercase tracking-[0.2em] mb-4">Activity Log</h3>
            <div id="log-container" class="overflow-y-auto space-y-2 flex-1 text-xs font-mono">
                <div class="text-slate-600">>> ç³»ç»Ÿå°±ç»ªï¼Œç­‰å¾…èº«ä»½éªŒè¯...</div>
            </div>
        </div>
    </div>

    <script>
        let counts = { star: 0, bomb: 0 };
        let currentUser = null;

        // è®¾ç½®å½“å‰ç”¨æˆ·
        function setUser(name) {
            currentUser = name;
            
            // UI åé¦ˆ
            document.getElementById('btn-WDP').classList.remove('user-active');
            document.getElementById('btn-YAJ').classList.remove('user-active');
            document.getElementById(`btn-${name}`).classList.add('user-active');

            // æ¿€æ´»ä¸‹æ–¹æ§åˆ¶é¢æ¿
            document.getElementById('control-panel').classList.remove('opacity-50', 'pointer-events-none');
            document.getElementById('user-hint').innerText = `å½“å‰æ“ä½œå‘˜: ${name} (å·²æˆæƒä¿®æ”¹)`;
            document.getElementById('user-hint').classList.replace('text-orange-400', 'text-sky-400');
        }

        function change(type, delta) {
            if (!currentUser) return; // äºŒé‡ä¿é™©
            if (counts[type] === 0 && delta === -1) return;

            counts[type] += delta;
            document.getElementById(`${type}-count`).innerText = counts[type];

            // è®°å½•æ—¥å¿—å¹¶åŒ…å«ç”¨æˆ·å
            const logContainer = document.getElementById('log-container');
            const time = new Date().toLocaleTimeString();
            const action = delta > 0 ? "å¢åŠ " : "å‡å°‘";
            const icon = type === 'star' ? "â­" : "ğŸ’£";
            
            const logEntry = document.createElement('div');
            logEntry.className = "border-l-2 border-slate-600 pl-2 py-1 bg-slate-900/30 mb-1";
            logEntry.innerHTML = `
                <span class="text-slate-500">[${time}]</span> 
                <span class="text-sky-400 font-bold">${currentUser}</span> 
                <span class="text-slate-300">${action}äº† ${icon}</span> 
                <span class="text-slate-500">| åº“: ${counts[type]}</span>`;
            
            if (logContainer.children[0]?.innerText.includes('ç³»ç»Ÿå°±ç»ª')) logContainer.innerHTML = '';
            logContainer.prepend(logEntry);

            // ã€å…³é”®ã€‘ä¿®æ”¹å®Œåé‡ç½®çŠ¶æ€ï¼Œå®ç°â€œæ¯æ¬¡æŒ‰ä¸€ä¸‹ç”¨æˆ·æ‰å¯ä¿®æ”¹â€
            resetLock();
        }

        function resetLock() {
            currentUser = null;
            document.getElementById('btn-WDP').classList.remove('user-active');
            document.getElementById('btn-YAJ').classList.remove('user-active');
            document.getElementById('control-panel').classList.add('opacity-50', 'pointer-events-none');
            document.getElementById('user-hint').innerText = "æ“ä½œå®Œæˆï¼Œè¯·é‡æ–°é€‰æ‹©æ“ä½œå‘˜ä»¥è¿›è¡Œä¸‹ä¸€æ¬¡ä¿®æ”¹";
            document.getElementById('user-hint').classList.replace('text-sky-400', 'text-orange-400');
        }
    </script>
</body>
</html>
