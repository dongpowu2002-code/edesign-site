<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eDesign Labs | ä»»åŠ¡è®°å½•ä»ª v4.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .user-active { border-color: #38bdf8; background-color: #0c4a6e; color: white; transform: scale(1.05); }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen flex flex-col items-center py-12 px-4">

    <div class="max-w-md w-full space-y-8">
        
        <div class="bg-slate-800 p-4 rounded-2xl border border-slate-700 shadow-lg text-center">
            <h3 class="text-xs font-mono text-slate-500 uppercase tracking-widest mb-3">æ“ä½œå‘˜éªŒè¯</h3>
            <div class="flex gap-4">
                <button id="btn-WDP" onclick="setUser('WDP')" class="flex-1 border-2 border-slate-700 py-3 rounded-xl transition-all font-bold">WDP</button>
                <button id="btn-YAJ" onclick="setUser('YAJ')" class="flex-1 border-2 border-slate-700 py-3 rounded-xl transition-all font-bold">YAJ</button>
            </div>
            <div class="flex justify-between items-center mt-3">
                <p id="user-hint" class="text-xs text-orange-400 italic">è¯·é€‰æ‹©æ“ä½œå‘˜ä»¥è§£é”æ§åˆ¶é¢æ¿</p>
                <button onclick="logout()" id="logout-btn" class="hidden text-[10px] bg-slate-700 px-2 py-1 rounded text-slate-400 hover:text-white">åˆ‡æ¢ç”¨æˆ·</button>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-6 opacity-50 pointer-events-none transition-opacity duration-300" id="control-panel">
            <div class="bg-slate-800 p-6 rounded-2xl text-center shadow-xl border border-slate-700">
                <div class="text-4xl mb-2">â­</div>
                <div id="star-count" class="text-5xl font-bold text-red-500 mb-4">0</div>
                <div class="flex gap-2">
                    <button onclick="change('star', -1)" class="flex-1 bg-slate-700 hover:bg-slate-600 py-2 rounded-lg active:scale-90">-</button>
                    <button onclick="change('star', 1)" class="flex-1 bg-red-600 hover:bg-red-500 py-2 rounded-lg active:scale-90 font-bold">+</button>
                </div>
            </div>

            <div class="bg-slate-800 p-6 rounded-2xl text-center shadow-xl border border-slate-700">
                <div class="text-4xl mb-2">ğŸ’£</div>
                <div id="bomb-count" class="text-5xl font-bold text-orange-500 mb-4">0</div>
                <div class="flex gap-2">
                    <button onclick="change('bomb', -1)" class="flex-1 bg-slate-700 hover:bg-slate-600 py-2 rounded-lg active:scale-90">-</button>
                    <button onclick="change('bomb', 1)" class="flex-1 bg-orange-600 hover:bg-orange-500 py-2 rounded-lg active:scale-90 font-bold">+</button>
                </div>
            </div>
        </div>

        <div class="bg-slate-800 rounded-2xl p-6 h-64 flex flex-col border border-slate-700">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-slate-500 text-[10px] font-mono uppercase tracking-[0.2em]">Activity Log</h3>
                <button onclick="clearAll()" class="text-[10px] text-red-900 hover:text-red-500 transition">æ¸…é™¤æ‰€æœ‰æ•°æ®</button>
            </div>
            <div id="log-container" class="overflow-y-auto space-y-2 flex-1 text-xs font-mono"></div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–ï¼šä»æœ¬åœ°å­˜å‚¨è¯»å–æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™è®¾ä¸ºé»˜è®¤å€¼
        let counts = JSON.parse(localStorage.getItem('edesign_counts')) || { star: 0, bomb: 0 };
        let logs = JSON.parse(localStorage.getItem('edesign_logs')) || [];
        let currentUser = null;

        // é¡µé¢åŠ è½½æ—¶æ¢å¤ UI
        window.onload = () => {
            updateUI();
            renderLogs();
        };

        function updateUI() {
            document.getElementById('star-count').innerText = counts.star;
            document.getElementById('bomb-count').innerText = counts.bomb;
        }

        function renderLogs() {
            const logContainer = document.getElementById('log-container');
            logContainer.innerHTML = logs.length ? '' : '<div class="text-slate-600">>> æ— å†å²è®°å½•</div>';
            logs.forEach(log => {
                const logEntry = document.createElement('div');
                logEntry.className = "border-l-2 border-slate-700 pl-2 py-1 bg-slate-900/20 mb-1";
                logEntry.innerHTML = log;
                logContainer.appendChild(logEntry); // æ³¨æ„ï¼šè¿™é‡Œä¸ºäº†ä¿æŒé¡ºåºï¼Œæ–°è®°å½•åœ¨å­˜å…¥æ•°ç»„æ—¶ç”¨ unshift
            });
        }

        function setUser(name) {
            currentUser = name;
            document.getElementById('btn-WDP').classList.remove('user-active');
            document.getElementById('btn-YAJ').classList.remove('user-active');
            document.getElementById(`btn-${name}`).classList.add('user-active');

            document.getElementById('control-panel').classList.remove('opacity-50', 'pointer-events-none');
            document.getElementById('user-hint').innerText = `å½“å‰ç™»å½•: ${name}`;
            document.getElementById('user-hint').className = "text-xs text-sky-400 font-bold";
            document.getElementById('logout-btn').classList.remove('hidden');
        }

        function logout() {
            currentUser = null;
            document.getElementById('btn-WDP').classList.remove('user-active');
            document.getElementById('btn-YAJ').classList.remove('user-active');
            document.getElementById('control-panel').classList.add('opacity-50', 'pointer-events-none');
            document.getElementById('user-hint').innerText = "è¯·é€‰æ‹©æ“ä½œå‘˜ä»¥è§£é”æ§åˆ¶é¢æ¿";
            document.getElementById('user-hint').className = "text-xs text-orange-400 italic";
            document.getElementById('logout-btn').classList.add('hidden');
        }

        function change(type, delta) {
            if (!currentUser) return;
            if (counts[type] === 0 && delta === -1) return;

            counts[type] += delta;
            
            // è®°å½•æ—¥å¿—
            const time = new Date().toLocaleTimeString();
            const action = delta > 0 ? "å¢åŠ " : "å‡å°‘";
            const icon = type === 'star' ? "â­" : "ğŸ’£";
            const logHTML = `<span class="text-slate-500">[${time}]</span> <span class="text-sky-400">${currentUser}</span> ${action}${icon} | åº“: ${counts[type]}`;
            
            logs.unshift(logHTML); // æ–°è®°å½•æ’åˆ°æ•°ç»„å¼€å¤´
            if (logs.length > 50) logs.pop(); // åªä¿ç•™æœ€è¿‘50æ¡

            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('edesign_counts', JSON.stringify(counts));
            localStorage.setItem('edesign_logs', JSON.stringify(logs));

            updateUI();
            renderLogs();
            // æ³¨æ„ï¼šè¿™é‡Œåˆ é™¤äº†ä¹‹å‰ç‰ˆæœ¬ä¸­çš„ resetLock()ï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥è¿ç»­æ“ä½œ
        }

        function clearAll() {
            if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚")) {
                localStorage.clear();
                location.reload();
            }
        }
    </script>
</body>
</html>
